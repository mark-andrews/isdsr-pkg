% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/regressions.R
\name{partial_corr}
\alias{partial_corr}
\title{Partial correlation with tidyselect helpers}
\usage{
partial_corr(var1, var2, controls, data)
}
\arguments{
\item{var1, var2}{Unquoted column names or tidyselect expressions identifying
the two focal variables.  Each must select exactly one column.}

\item{controls}{Tidyselect expression specifying the set of covariates to
control for.  Must leave at least one column after \code{var1} and
\code{var2} have been removed.}

\item{data}{A data frame.}
}
\value{
A one-row tibble with the following numeric columns:
\describe{
\item{\code{estimate}}{partial correlation coefficient}
\item{\code{statistic}}{t statistic for testing \eqn{\rho = 0}}
\item{\code{p_value}}{two-sided p-value}
\item{\code{n}}{number of complete cases used}
\item{\code{gn}}{number of control variables}
}
}
\description{
Calculates the Pearson partial correlation between two focal variables while
controlling for one or more covariates, using
\code{\link[ppcor]{pcor.test}} under the hood.
Unlike \code{ppcor::pcor.test()}, the wrapper lets you choose columns with
tidyselect syntax and unquoted names.
}
\details{
\itemize{
\item \code{var1} and \code{var2} must each resolve to exactly one column
of \code{data}; an error is thrown otherwise.
\item \code{controls} can be any tidyselect expression; for example
\code{-c(country, var1, var2)} or \code{where(is.numeric)}.
Columns that overlap with \code{var1} or \code{var2} are silently
discarded, and at least one control variable must remain.
\item Rows containing missing values in any selected column are removed
before the test is performed.
\item The function always returns the Pearson partial correlation
coefficient.  For Spearman or Kendall partials, call
\code{ppcor::pcor.test()} directly.
}
}
\examples{
partial_corr(
  var1     = mpg,
  var2     = hp,
  controls = -c(mpg, hp, cyl), # drop focal vars + cyl
  data     = mtcars
)
}
